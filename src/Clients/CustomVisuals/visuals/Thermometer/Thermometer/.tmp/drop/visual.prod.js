var powerbi;!function(t){var i;!function(t){var i;!function(t){var i;!function(t){var i=function(){function t(t){this.prevDataViewObjects={},this.viewport;var i=this.svg=d3.select(t.element).append("svg").classed("Thermometer",!0);t.element.setAttribute("id","container");var e=i.append("g");this.backRect=e.append("rect"),this.backCircle=e.append("circle"),this.fillRect=e.append("rect"),this.fillCircle=e.append("circle"),this.text=e.append("text"),this.tempMarkings=i.append("g").attr("class","y axis")}return t.converter=function(t,i){var e=t.categorical.values;return{value:e[0].values[e[0].values.length-1]}},t.prototype.update=function(i){if(i.dataViews&&0!==i.dataViews.length){var e=i.dataViews[0];this.dataView=i.dataViews[0],this.data=t.converter(i.dataViews[0],null),this.data.max=t.getValue(e,"max",100),this.data.min=t.getValue(e,"min",0),this.data.drawTickBar=t.getValue(e,"tickBar",!0),this.data.value>this.data.max&&(this.data.max=Math.ceil(this.data.value)),this.data.value<this.data.min&&(this.data.min=Math.floor(this.data.value));var a=i.viewport,r=a.height,l=a.width,s=1e3;this.svg.attr({height:r,width:l}),this.draw(l,r,s)}},t.prototype.draw=function(t,i,e){var a=.1*i,r=.25*a;this.drawBack(t,i,a),this.drawFill(t,i,a,r,e),this.drawTicks(t,i,a,r),this.drawText(t,i,a,r),d3.select("#y axis").remove()},t.prototype.drawBack=function(i,e,a){var r=e-a,l=t.getFill(this.dataView,"border").solid.color;this.backCircle.attr({cx:i/2,cy:r,r:a}).style({fill:l}),this.backRect.attr({x:(i-a)/2,y:0,width:a,height:r}).style({fill:l})},t.prototype.drawFill=function(i,e,a,r,l){var s=.8*a,n=.7*s,o=e-2*a-r,c=t.getFill(this.dataView,"fill").solid.color,d=this.data.min,u=this.data.max,h=this.data.value>u?u:this.data.value,f=(o-r)*((h-d)/(u-d)),v=e-a;this.fillCircle.attr({cx:i/2,cy:v,r:s}).style({fill:c}),this.fillRect.style({fill:c}).attr({x:(i-n)/2,width:n}).attr({y:o-f,height:v-o+f})},t.prototype.drawTicks=function(i,e,a,r){d3.select(".y.axis").attr("visibility","visible");var l,s,n=t.getValue(this.dataView,"postfix","");console.log(n),l=d3.scale.linear().range([e-2*a-r,r]),s=d3.svg.axis().scale(l).ticks(6).orient("right"),l.domain([this.data.min,this.data.max]),this.tempMarkings.attr("transform","translate("+((i+a)/2+.15*a)+",0)").style({"font-size":.03*a+"em","font-family":"Segoe UI",stroke:"none",fill:"#333"}).call(s),this.tempMarkings.selectAll(".axis line, .axis path").style({stroke:"#333",fill:"none"});for(var o=0;o<document.querySelectorAll(".axis text").length;o++)document.querySelectorAll(".axis text")[o].innerHTML=document.querySelectorAll(".axis text")[o].innerHTML+" "+n;this.data.drawTickBar||d3.select(".y.axis").attr("visibility","hidden")},t.prototype.drawText=function(i,e,a,r){this.text.text(0|(this.data.value>this.data.max?this.data.max:this.data.value)).attr({x:i/2,y:e-a,dy:".35em"}).style({fill:t.getFill(this.dataView,"fontColor").solid.color,"text-anchor":"middle","font-family":"Segoe UI","font-size":.03*a+"em"})},t.prototype.enumerateObjectInstances=function(i){var e=[],a=this.dataView;switch(i.objectName){case"config":var r={objectName:"config",displayName:"Configurations",selector:null,properties:{fill:t.getFill(a,"fill"),border:t.getFill(a,"border"),max:t.getValue(a,"max",100),min:t.getValue(a,"min",0),tickBar:t.getValue(a,"tickBar",!0),fontColor:t.getFill(a,"fontColor"),postfix:t.getValue(a,"postfix","")}};e.push(r)}return e},t.getFill=function(t,i){if(t){var e=t.metadata.objects;if(e){var a=e.config;if(a){var r=a[i];if(r)return r}}}return"fill"===i?{solid:{color:"#30ADFF"}}:"fontColor"===i?{solid:{color:"#000"}}:{solid:{color:"#D0EEF7"}}},t.getValue=function(t,i,e){if(t){var a=t.metadata.objects;if(a){var r=a.config;if(r){var l=r[i];if(null!=l)return l}}}return e},t}();t.Thermometer=i}(i=t.PBI_CV_309E6B47_39A5_4681_808F_132AFB230872||(t.PBI_CV_309E6B47_39A5_4681_808F_132AFB230872={}))}(i=t.visual||(t.visual={}))}(i=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var i;!function(t){var i;!function(t){var i;!function(t){function i(t,i,e,a){if(t){var r=t[i];if(r){var l=r[e];if(void 0!==l)return l}}return a}function e(t,i,e,a,r){var l=t.objects;if(l){var s=l[i];if(s){var n=s[e];if(n){var o=n[a];if(void 0!==o)return o}}}return r}t.getValue=i,t.getCategoricalObjectValue=e}(i=t.PBI_CV_309E6B47_39A5_4681_808F_132AFB230872||(t.PBI_CV_309E6B47_39A5_4681_808F_132AFB230872={}))}(i=t.visual||(t.visual={}))}(i=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var i;!function(i){var e;!function(i){i.PBI_CV_309E6B47_39A5_4681_808F_132AFB230872={name:"PBI_CV_309E6B47_39A5_4681_808F_132AFB230872",displayName:"Thermometer",class:"Thermometer",version:"1.0.0",apiVersion:"1.1.0",create:function(i){return new t.extensibility.visual.PBI_CV_309E6B47_39A5_4681_808F_132AFB230872.Thermometer(i)},custom:!0}}(e=i.plugins||(i.plugins={}))}(i=t.visuals||(t.visuals={}))}(powerbi||(powerbi={}));