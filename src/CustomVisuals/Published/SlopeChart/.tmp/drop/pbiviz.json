{"visual":{"name":"SlopeChartByMAQSoftware","displayName":"Slope chart by MAQ Software","guid":"SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798_DEBUG","visualClassName":"SlopeChart","version":"3.0.1","description":"Slope Chart is an excellent tool for illustrating the change between two data points. This visual is commonly used to show upward or downward trends.","supportUrl":"https://github.com/maqsoftware/PowerBI-visuals/issues","gitHubUrl":"https://github.com/maqsoftware/PowerBI-visuals/"},"apiVersion":"1.8.0","author":{"name":"MAQ Software","email":"support@maqsoftware.com"},"assets":{"icon":"assets/icon.png"},"externalJS":["node_modules/powerbi-visuals-utils-dataviewutils/lib/index.js"],"style":"style/visual.less","capabilities":{"dataRoles":[{"displayName":"Category","kind":"Grouping","name":"category"},{"displayName":"Measure","kind":"Measure","name":"measure"}],"dataViewMappings":[{"conditions":[{"category":{"max":1},"measure":{"max":2}}],"scriptResult":{"dataInput":{"table":{"rows":{"select":[{"for":{"in":"category"}},{"for":{"in":"measure"}}],"dataReductionAlgorithm":{"top":{}}}}},"script":{"scriptProviderDefault":"R","scriptOutputType":"html","source":{"objectName":"rcv_script","propertyName":"source"},"provider":{"objectName":"rcv_script","propertyName":"provider"},"scriptSourceDefault":"# Copyright (c) MAQ Software.  All rights reserved.\n\n# Third Party Programs. This software enables you to obtain software applications from other sources. \n# Those applications are offered and distributed by third parties under their own license terms.\n# MAQ Software is not developing, distributing or licensing those applications to you, but instead, \n# as a convenience, enables you to use this software to obtain those applications directly from \n# the application providers.\n# By using the software, you acknowledge and agree that you are obtaining the applications directly\n# from the third party providers and under separate license terms, and that it is your responsibility to locate, \n# understand and comply with those license terms.\n# Microsoft grants you no license rights for third-party software or applications that is obtained using this software.\n\n#\n# WARNINGS:   \n#\n# CREATION DATE: 06/12/2017\n#\n# LAST UPDATE: --/--/---\n#\n# VERSION: 3.0.0\n#\n# R VERSION TESTED: 3.4.2\n# \n# AUTHOR: MAQ Softwaqre\n\n############### Utility functions ###############\nlibraryRequireInstall = function(packageName, ...)\n{\n  if(!require(packageName, character.only = TRUE)) \n    warning(paste(\"*** The package: '\", packageName, \"' was not installed ***\", sep=\"\"))\n}\n\nlibraryRequireInstall(\"XML\")\nlibraryRequireInstall(\"htmlwidgets\")\n\ninternalSaveWidget <- function(widget, fname)\n{\n  tempFname = paste(fname, \".tmp\", sep=\"\")\n  htmlwidgets::saveWidget(widget, file = tempFname, selfcontained = FALSE)\n  FlattenHTML(tempFname, fname)\n}\n\nFlattenHTML <- function(fnameIn, fnameOut)\n{\n  # Read and parse HTML file\n  # Embed all js and css files into one unified file\n  \n  if(!file.exists(fnameIn))\n    return(FALSE)\n  \n  dir = dirname(fnameIn)\n  html = htmlTreeParse(fnameIn, useInternal = TRUE)\n  top = xmlRoot(html)\n  \n  # extract all <script> tags with src value\n  srcNode=getNodeSet(top, '//script[@src]')\n  for (node in srcNode)\n  {\n    b = xmlAttrs(node)\n    fname = file.path(dir, b['src'])\n    alternateSrc = FindSrcReplacement(fname)\n    if (!is.null(alternateSrc))\n    {\n      s = alternateSrc\n      names(s) = 'src'\n      newNode = xmlNode(\"script\",attrs = s)\n      replaceNodes(node, newNode)\n    }else{\n      str=ReadFileForEmbedding(fname);\n      if (!is.null(str))\n      {      \n        newNode = xmlNode(\"script\", str, attrs = c(type = \"text/javascript\"))\n        replaceNodes(node, newNode)\n      }\n    }\n  }\n  \n  # extract all <link> tags with src value\n  linkNode=getNodeSet(top, '//link[@href]')\n  for (node in linkNode)\n  {\n    b = xmlAttrs(node)\n    fname = file.path(dir, b['href'])\n    str = ReadFileForEmbedding(fname, FALSE);\n    if (!is.null(str))\n    {\n      newNode = xmlNode(\"style\", str)\n      replaceNodes(node, newNode)\n    }\n  }\n  \n  saveXML(html, file = fnameOut)\n  return(TRUE)\n}\n\nReadFileForEmbedding <- function(fname, addCdata = TRUE)\n{\n  data = ReadFullFile(fname)\n  if (is.null(data))\n    return(NULL)\n\n  str = paste(data, collapse ='\\n')\n  if (addCdata) {\n    str = paste(cbind('// <![CDATA[', str,'// ]]>'), collapse ='\\n')\n  }\n  return(str)\n}\n\nReadFullFile <- function(fname)\n{\n  if(!file.exists(fname))\n    return(NULL)\n  \n  con = file(fname, open = \"r\")\n  data = readLines(con)\n  close(con)\n  return(data)\n}\n\nFindSrcReplacement <- function(str)\n{\n  # finds reference to 'plotly' js and replaces with a version from CDN\n  # This allows the HTML to be smaller, since this script is not fully embedded in it\n  str <- iconv(str, to=\"UTF-8\")\n  pattern = \"plotlyjs-(\\\\w.+)/plotly-latest.min.js\"\n  match1=regexpr(pattern, str)\n  attr(match1, 'useBytes') <- FALSE\n  strMatch=regmatches(str, match1, invert = FALSE)\n  if (length(strMatch) == 0) return(NULL)\n  \n  pattern2 = \"-(\\\\d.+)/\"\n  match2 = regexpr(pattern2, strMatch[1])\n  attr(match2, 'useBytes') <- FALSE\n  strmatch = regmatches(strMatch[1], match2)\n  if (length(strmatch) == 0) return(NULL)\n  \n  # CDN url is https://cdn.plot.ly/plotly-<Version>.js\n  # This matches the specific version used in the plotly package used.\n  verstr = substr(strmatch, 2, nchar(strmatch)-1)\n  str = paste('https://cdn.plot.ly/plotly-', verstr,'.min.js', sep='')\n  return(str)\n}\n#################################################\n\n\n############### Library Declarations ###############\n## Plotting libraries \nlibraryRequireInstall(\"ggplot2\");\nlibraryRequireInstall(\"plotly\");\n## Datastream parsing library\nlibraryRequireInstall(\"magrittr\");\n## HTML function and output facilitator libraries\nlibraryRequireInstall(\"htmlwidgets\");\nlibraryRequireInstall(\"XML\");\n####################################################\n\n################### Actual code ####################\n\n##Error handeling\ntryCatch({\n\n##Defining properties\nupColor = '#00ba38'\nif(exists(\"SlopeColor_upColor\")){\n    upColor = SlopeColor_upColor\n}\ndownColor = '#f8766d'\nif(exists(\"SlopeColor_downColor\")){\n    downColor = SlopeColor_downColor\n}\nneutralColor = '#F2C80F'\nif(exists(\"SlopeColor_neutralColor\")){\n    neutralColor = SlopeColor_neutralColor\n}\nintercept1Title<-colnames(measure[1])\nif(exists(\"intercept_intercept1Title\") && intercept_intercept1Title != ''){\n    intercept1Title = intercept_intercept1Title\n}\nintercept2Title<-colnames(measure[2])\nif(exists(\"intercept_intercept2Title\") && intercept_intercept2Title != ''){\n    intercept2Title = intercept_intercept2Title\n}\nintercept1Color = 'black'\nif(exists(\"intercept_intercept1Color\")){\n    intercept1Color = intercept_intercept1Color\n}\nintercept2Color = 'black'\nif(exists(\"intercept_intercept2Color\")){\n    intercept2Color = intercept_intercept2Color\n}\nyTitle = 'Trend'\nif(exists(\"yAxis_yTitle\") && yAxis_yTitle != ''){\n    yTitle = yAxis_yTitle\n}\nyGrid = FALSE\nif(exists(\"yAxis_yGrid\")){\n    yGrid = yAxis_yGrid\n}\nyGridCol = \"Gray50\"\nif(exists(\"yAxis_yGridCol\")){\n    yGridCol = yAxis_yGridCol\n}\n\n\n#Prepare data\ncategoryName = c(category)\nvalue1 = c(measure[1])\nvalue2 = c(measure[2])\ndf = data.frame(categoryName,value1,value2)\ncolnames(df) <- c(\"categoryName\", \"value1\", \"value2\")\nleft_label <- paste(df$categoryName, df$value1,sep=\", \")\nright_label <- paste(df$categoryName, df$value2,sep=\", \")\ndf$class <- ifelse((df$value2 - df$value1) < 0, \"Down\", (ifelse((df$value2 - df$value1) == 0, \"Neutral\", \"Up\")))\nx<-geom_segment(aes(text =paste(df$categoryName), x=1, xend=2, y=value1, yend=value2, col=class), size=.75, show.legend=F)\n\n#Plot\nplotOutput <- ggplot(df) + x + \n                  geom_vline(xintercept=1, linetype=\"dashed\", size=.1, color=I(intercept1Color)) + \n                  geom_vline(xintercept=2, linetype=\"dashed\", size=.1, color=I(intercept2Color)) +\n                  scale_color_manual(labels = c(\"Up\", \"Down\", \"Neutral\"), \n                                     values = c(\"Up\"=upColor, \"Down\"=downColor, \"Neutral\"=neutralColor)) +  # color of lines\n                  labs(x=\"\", y=yTitle) +  # Axis labels\n                  xlim(.5, 2.5) + ylim(0,(1.1*(max(df$value1, df$value2))))  # X and Y axis limits\n\n#Add texts\nplotOutput <- plotOutput + geom_text(label=left_label, y=df$value1, x=rep(.78, NROW(df)), hjust=-0.1, size=3.5)\nplotOutput <- plotOutput + geom_text(label=right_label, y=df$value2, x=rep(2.22, NROW(df)), hjust=-0.1, size=3.5)\nplotOutput <- plotOutput + geom_text(label=intercept1Title, x=.78, y=1.1*(max(df$value1, df$value2)), hjust=1.2, size=5)  # title\nplotOutput <- plotOutput + geom_text(label=intercept2Title, x=2.22, y=1.1*(max(df$value1, df$value2)), hjust=-0.1, size=5)  # title\n\n#Minify theme\nplotOutput <- plotOutput + theme(panel.background = element_blank())\nplotOutput <- plotOutput + theme(axis.ticks = element_blank())\nplotOutput <- plotOutput + theme(axis.text.x = element_blank())\nplotOutput <- plotOutput + theme(panel.border = element_blank())\n\nif(yGrid==TRUE)\n{\nplotOutput <- plotOutput + theme(panel.grid.major.y = element_line(colour = I(yGridCol), size=0.25))\nplotOutput <- plotOutput + theme(panel.grid.minor.y = element_line(colour = I(yGridCol), size=0.25))\n}\n\n############# Create and save widget ###############\nplotOutput = ggplotly(plotOutput, tooltip=NULL);\n\ndisabledButtonsList <- list('hoverCompareCartesian')\nplotOutput$x$config$modeBarButtonsToRemove = disabledButtonsList\n\ninternalSaveWidget(config(plotOutput, collaborate = FALSE, displaylogo=FALSE), 'out.html');\n######################################################\n},\nerror = function(e) {\n\n\n         xLayout <- list(\n     title = sprintf(\"Please provide correct input data\"),\n     zeroline = FALSE,\n     showline = FALSE,\n     showticklabels = FALSE,\n     showgrid = FALSE\n     )\n     yLayout <- list(\n     title = \"\",\n     zeroline = FALSE,\n     showline = FALSE,\n     showticklabels = FALSE,\n     showgrid = FALSE\n     )\n     plotOutput <- plot_ly() %>%\n     layout(title = '',\n                     xaxis = xLayout, \n                     yaxis = yLayout)\n     internalSaveWidget(plotOutput, 'out.html');\n     quit()\n\n}\n)"}}}],"objects":{"rcv_script":{"properties":{"provider":{"type":{"text":true}},"source":{"type":{"scripting":{"source":true}}}}},"SlopeColor":{"displayName":"Slope color","properties":{"upColor":{"displayName":"Up color","description":"Color of upward slope","type":{"fill":{"solid":{"color":true}}}},"downColor":{"displayName":"Down color","description":"Color of downward slope","type":{"fill":{"solid":{"color":true}}}},"neutralColor":{"displayName":"Neutral color","description":"Color of neutral line","type":{"fill":{"solid":{"color":true}}}}}},"yAxis":{"displayName":"Axis","properties":{"yTitle":{"displayName":"Y title","description":"Enter the title for y-axis","placeHolderText":"Auto","type":{"text":true},"suppressFormatPainterCopy":false},"yGrid":{"displayName":"Y grid line","description":"Turn grid lines for y-axis on or off","type":{"bool":true}},"yGridCol":{"displayName":"Y grid color","description":"Choose the color for y-axis grid lines","type":{"fill":{"solid":{"color":true}}}}}},"intercept":{"displayName":"Intercepts","properties":{"intercept1Title":{"displayName":"Intercept 1 title","description":"Title of first intercept","placeHolderText":"Auto","type":{"text":true},"suppressFormatPainterCopy":false},"intercept2Title":{"displayName":"Intercept 2 title","description":"Title of second intercept","placeHolderText":"Auto","type":{"text":true},"suppressFormatPainterCopy":false},"intercept1Color":{"displayName":"Intercept 1 color","description":"Color of first intercept","type":{"fill":{"solid":{"color":true}}}},"intercept2Color":{"displayName":"Intercept 2 color","description":"Color of second intercept","type":{"fill":{"solid":{"color":true}}}}}}},"suppressDefaultTitle":true},"dependencies":{"cranPackages":[{"name":"ggplot2","displayName":"GG Plot 2","url":"https://cran.r-project.org/web/packages/ggplot2/index.html"},{"name":"scales","displayName":"scales","url":"https://cran.r-project.org/web/packages/scales/index.html"},{"name":"plotly","displayName":"Plotly","url":"https://cran.r-project.org/web/packages/plotly/index.html"},{"name":"htmlwidgets","displayName":"HTML Widgets","url":"https://cran.r-project.org/web/packages/htmlwidgets/index.html"},{"name":"XML","displayName":"XML","url":"https://cran.r-project.org/web/packages/XML/index.html"},{"name":"ggrepel","displayName":"ggrepel","url":"https://cran.r-project.org/web/packages/ggrepel/index.html"}]},"stringResources":{},"content":{"js":"/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved.\n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *\n *  The above copyright notice and this permission notice shall be included in\n *  all copies or substantial portions of the Software.\n *\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\nvar powerbi;\n(function (powerbi) {\n    var extensibility;\n    (function (extensibility) {\n        var utils;\n        (function (utils) {\n            var dataview;\n            (function (dataview) {\n                // TODO: refactor & focus DataViewTransform into a service with well-defined dependencies.\n                var DataViewTransform;\n                (function (DataViewTransform) {\n                    // TODO: refactor this, setGrouped, and groupValues to a test helper to stop using it in the product\n                    function createValueColumns(values, valueIdentityFields, source) {\n                        if (values === void 0) { values = []; }\n                        var result = values;\n                        setGrouped(result);\n                        if (valueIdentityFields) {\n                            result.identityFields = valueIdentityFields;\n                        }\n                        if (source) {\n                            result.source = source;\n                        }\n                        return result;\n                    }\n                    DataViewTransform.createValueColumns = createValueColumns;\n                    function setGrouped(values, groupedResult) {\n                        values.grouped = groupedResult\n                            ? function () { return groupedResult; }\n                            : function () { return groupValues(values); };\n                    }\n                    DataViewTransform.setGrouped = setGrouped;\n                    /** Group together the values with a common identity. */\n                    function groupValues(values) {\n                        var groups = [], currentGroup;\n                        for (var i = 0, len = values.length; i < len; i++) {\n                            var value = values[i];\n                            if (!currentGroup || currentGroup.identity !== value.identity) {\n                                currentGroup = {\n                                    values: []\n                                };\n                                if (value.identity) {\n                                    currentGroup.identity = value.identity;\n                                    var source = value.source;\n                                    // allow null, which will be formatted as (Blank).\n                                    if (source.groupName !== undefined) {\n                                        currentGroup.name = source.groupName;\n                                    }\n                                    else if (source.displayName) {\n                                        currentGroup.name = source.displayName;\n                                    }\n                                }\n                                groups.push(currentGroup);\n                            }\n                            currentGroup.values.push(value);\n                        }\n                        return groups;\n                    }\n                    DataViewTransform.groupValues = groupValues;\n                })(DataViewTransform = dataview.DataViewTransform || (dataview.DataViewTransform = {}));\n            })(dataview = utils.dataview || (utils.dataview = {}));\n        })(utils = extensibility.utils || (extensibility.utils = {}));\n    })(extensibility = powerbi.extensibility || (powerbi.extensibility = {}));\n})(powerbi || (powerbi = {}));\n/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved.\n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *\n *  The above copyright notice and this permission notice shall be included in\n *  all copies or substantial portions of the Software.\n *\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\nvar powerbi;\n(function (powerbi) {\n    var extensibility;\n    (function (extensibility) {\n        var utils;\n        (function (utils) {\n            var dataview;\n            (function (dataview) {\n                var DataRoleHelper;\n                (function (DataRoleHelper) {\n                    function getMeasureIndexOfRole(grouped, roleName) {\n                        if (!grouped || !grouped.length) {\n                            return -1;\n                        }\n                        var firstGroup = grouped[0];\n                        if (firstGroup.values && firstGroup.values.length > 0) {\n                            for (var i = 0, len = firstGroup.values.length; i < len; ++i) {\n                                var value = firstGroup.values[i];\n                                if (value && value.source) {\n                                    if (hasRole(value.source, roleName)) {\n                                        return i;\n                                    }\n                                }\n                            }\n                        }\n                        return -1;\n                    }\n                    DataRoleHelper.getMeasureIndexOfRole = getMeasureIndexOfRole;\n                    function getCategoryIndexOfRole(categories, roleName) {\n                        if (categories && categories.length) {\n                            for (var i = 0, ilen = categories.length; i < ilen; i++) {\n                                if (hasRole(categories[i].source, roleName)) {\n                                    return i;\n                                }\n                            }\n                        }\n                        return -1;\n                    }\n                    DataRoleHelper.getCategoryIndexOfRole = getCategoryIndexOfRole;\n                    function hasRole(column, name) {\n                        var roles = column.roles;\n                        return roles && roles[name];\n                    }\n                    DataRoleHelper.hasRole = hasRole;\n                    function hasRoleInDataView(dataView, name) {\n                        return dataView != null\n                            && dataView.metadata != null\n                            && dataView.metadata.columns\n                            && dataView.metadata.columns.some(function (c) { return c.roles && c.roles[name] !== undefined; }); // any is an alias of some\n                    }\n                    DataRoleHelper.hasRoleInDataView = hasRoleInDataView;\n                    function hasRoleInValueColumn(valueColumn, name) {\n                        return valueColumn\n                            && valueColumn.source\n                            && valueColumn.source.roles\n                            && (valueColumn.source.roles[name] === true);\n                    }\n                    DataRoleHelper.hasRoleInValueColumn = hasRoleInValueColumn;\n                })(DataRoleHelper = dataview.DataRoleHelper || (dataview.DataRoleHelper = {}));\n            })(dataview = utils.dataview || (utils.dataview = {}));\n        })(utils = extensibility.utils || (extensibility.utils = {}));\n    })(extensibility = powerbi.extensibility || (powerbi.extensibility = {}));\n})(powerbi || (powerbi = {}));\n/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved.\n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *\n *  The above copyright notice and this permission notice shall be included in\n *  all copies or substantial portions of the Software.\n *\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\nvar powerbi;\n(function (powerbi) {\n    var extensibility;\n    (function (extensibility) {\n        var utils;\n        (function (utils) {\n            var dataview;\n            (function (dataview) {\n                var DataViewObject;\n                (function (DataViewObject) {\n                    function getValue(object, propertyName, defaultValue) {\n                        if (!object) {\n                            return defaultValue;\n                        }\n                        var propertyValue = object[propertyName];\n                        if (propertyValue === undefined) {\n                            return defaultValue;\n                        }\n                        return propertyValue;\n                    }\n                    DataViewObject.getValue = getValue;\n                    /** Gets the solid color from a fill property using only a propertyName */\n                    function getFillColorByPropertyName(object, propertyName, defaultColor) {\n                        var value = getValue(object, propertyName);\n                        if (!value || !value.solid) {\n                            return defaultColor;\n                        }\n                        return value.solid.color;\n                    }\n                    DataViewObject.getFillColorByPropertyName = getFillColorByPropertyName;\n                })(DataViewObject = dataview.DataViewObject || (dataview.DataViewObject = {}));\n            })(dataview = utils.dataview || (utils.dataview = {}));\n        })(utils = extensibility.utils || (extensibility.utils = {}));\n    })(extensibility = powerbi.extensibility || (powerbi.extensibility = {}));\n})(powerbi || (powerbi = {}));\n/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved.\n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *\n *  The above copyright notice and this permission notice shall be included in\n *  all copies or substantial portions of the Software.\n *\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\nvar powerbi;\n(function (powerbi) {\n    var extensibility;\n    (function (extensibility) {\n        var utils;\n        (function (utils) {\n            var dataview;\n            (function (dataview) {\n                var DataViewObjects;\n                (function (DataViewObjects) {\n                    /** Gets the value of the given object/property pair. */\n                    function getValue(objects, propertyId, defaultValue) {\n                        if (!objects) {\n                            return defaultValue;\n                        }\n                        return dataview.DataViewObject.getValue(objects[propertyId.objectName], propertyId.propertyName, defaultValue);\n                    }\n                    DataViewObjects.getValue = getValue;\n                    /** Gets an object from objects. */\n                    function getObject(objects, objectName, defaultValue) {\n                        if (objects && objects[objectName]) {\n                            return objects[objectName];\n                        }\n                        return defaultValue;\n                    }\n                    DataViewObjects.getObject = getObject;\n                    /** Gets the solid color from a fill property. */\n                    function getFillColor(objects, propertyId, defaultColor) {\n                        var value = getValue(objects, propertyId);\n                        if (!value || !value.solid) {\n                            return defaultColor;\n                        }\n                        return value.solid.color;\n                    }\n                    DataViewObjects.getFillColor = getFillColor;\n                    function getCommonValue(objects, propertyId, defaultValue) {\n                        var value = getValue(objects, propertyId, defaultValue);\n                        if (value && value.solid) {\n                            return value.solid.color;\n                        }\n                        if (value === undefined\n                            || value === null\n                            || (typeof value === \"object\" && !value.solid)) {\n                            return defaultValue;\n                        }\n                        return value;\n                    }\n                    DataViewObjects.getCommonValue = getCommonValue;\n                })(DataViewObjects = dataview.DataViewObjects || (dataview.DataViewObjects = {}));\n            })(dataview = utils.dataview || (utils.dataview = {}));\n        })(utils = extensibility.utils || (extensibility.utils = {}));\n    })(extensibility = powerbi.extensibility || (powerbi.extensibility = {}));\n})(powerbi || (powerbi = {}));\n/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved.\n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *\n *  The above copyright notice and this permission notice shall be included in\n *  all copies or substantial portions of the Software.\n *\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\nvar powerbi;\n(function (powerbi) {\n    var extensibility;\n    (function (extensibility) {\n        var utils;\n        (function (utils) {\n            var dataview;\n            (function (dataview) {\n                // powerbi.extensibility.utils.dataview\n                var DataRoleHelper = powerbi.extensibility.utils.dataview.DataRoleHelper;\n                var converterHelper;\n                (function (converterHelper) {\n                    function categoryIsAlsoSeriesRole(dataView, seriesRoleName, categoryRoleName) {\n                        if (dataView.categories && dataView.categories.length > 0) {\n                            // Need to pivot data if our category soure is a series role\n                            var category = dataView.categories[0];\n                            return category.source &&\n                                DataRoleHelper.hasRole(category.source, seriesRoleName) &&\n                                DataRoleHelper.hasRole(category.source, categoryRoleName);\n                        }\n                        return false;\n                    }\n                    converterHelper.categoryIsAlsoSeriesRole = categoryIsAlsoSeriesRole;\n                    function getSeriesName(source) {\n                        return (source.groupName !== undefined)\n                            ? source.groupName\n                            : source.queryName;\n                    }\n                    converterHelper.getSeriesName = getSeriesName;\n                    function isImageUrlColumn(column) {\n                        var misc = getMiscellaneousTypeDescriptor(column);\n                        return misc != null && misc.imageUrl === true;\n                    }\n                    converterHelper.isImageUrlColumn = isImageUrlColumn;\n                    function isWebUrlColumn(column) {\n                        var misc = getMiscellaneousTypeDescriptor(column);\n                        return misc != null && misc.webUrl === true;\n                    }\n                    converterHelper.isWebUrlColumn = isWebUrlColumn;\n                    function getMiscellaneousTypeDescriptor(column) {\n                        return column\n                            && column.type\n                            && column.type.misc;\n                    }\n                    converterHelper.getMiscellaneousTypeDescriptor = getMiscellaneousTypeDescriptor;\n                    function hasImageUrlColumn(dataView) {\n                        if (!dataView || !dataView.metadata || !dataView.metadata.columns || !dataView.metadata.columns.length) {\n                            return false;\n                        }\n                        return dataView.metadata.columns.some(function (column) { return isImageUrlColumn(column) === true; });\n                    }\n                    converterHelper.hasImageUrlColumn = hasImageUrlColumn;\n                })(converterHelper = dataview.converterHelper || (dataview.converterHelper = {}));\n            })(dataview = utils.dataview || (utils.dataview = {}));\n        })(utils = extensibility.utils || (extensibility.utils = {}));\n    })(extensibility = powerbi.extensibility || (powerbi.extensibility = {}));\n})(powerbi || (powerbi = {}));\n/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved.\n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *\n *  The above copyright notice and this permission notice shall be included in\n *  all copies or substantial portions of the Software.\n *\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\nvar powerbi;\n(function (powerbi) {\n    var extensibility;\n    (function (extensibility) {\n        var utils;\n        (function (utils) {\n            var dataview;\n            (function (dataview) {\n                var DataViewObjectsParser = (function () {\n                    function DataViewObjectsParser() {\n                    }\n                    DataViewObjectsParser.getDefault = function () {\n                        return new this();\n                    };\n                    DataViewObjectsParser.createPropertyIdentifier = function (objectName, propertyName) {\n                        return {\n                            objectName: objectName,\n                            propertyName: propertyName\n                        };\n                    };\n                    DataViewObjectsParser.parse = function (dataView) {\n                        var dataViewObjectParser = this.getDefault(), properties;\n                        if (!dataView || !dataView.metadata || !dataView.metadata.objects) {\n                            return dataViewObjectParser;\n                        }\n                        properties = dataViewObjectParser.getProperties();\n                        for (var objectName in properties) {\n                            for (var propertyName in properties[objectName]) {\n                                var defaultValue = dataViewObjectParser[objectName][propertyName];\n                                dataViewObjectParser[objectName][propertyName] = dataview.DataViewObjects.getCommonValue(dataView.metadata.objects, properties[objectName][propertyName], defaultValue);\n                            }\n                        }\n                        return dataViewObjectParser;\n                    };\n                    DataViewObjectsParser.isPropertyEnumerable = function (propertyName) {\n                        return !DataViewObjectsParser.InnumerablePropertyPrefix.test(propertyName);\n                    };\n                    DataViewObjectsParser.enumerateObjectInstances = function (dataViewObjectParser, options) {\n                        var dataViewProperties = dataViewObjectParser && dataViewObjectParser[options.objectName];\n                        if (!dataViewProperties) {\n                            return [];\n                        }\n                        var instance = {\n                            objectName: options.objectName,\n                            selector: null,\n                            properties: {}\n                        };\n                        for (var key in dataViewProperties) {\n                            if (dataViewProperties.hasOwnProperty(key)) {\n                                instance.properties[key] = dataViewProperties[key];\n                            }\n                        }\n                        return {\n                            instances: [instance]\n                        };\n                    };\n                    DataViewObjectsParser.prototype.getProperties = function () {\n                        var _this = this;\n                        var properties = {}, objectNames = Object.keys(this);\n                        objectNames.forEach(function (objectName) {\n                            if (DataViewObjectsParser.isPropertyEnumerable(objectName)) {\n                                var propertyNames = Object.keys(_this[objectName]);\n                                properties[objectName] = {};\n                                propertyNames.forEach(function (propertyName) {\n                                    if (DataViewObjectsParser.isPropertyEnumerable(objectName)) {\n                                        properties[objectName][propertyName] =\n                                            DataViewObjectsParser.createPropertyIdentifier(objectName, propertyName);\n                                    }\n                                });\n                            }\n                        });\n                        return properties;\n                    };\n                    return DataViewObjectsParser;\n                }());\n                DataViewObjectsParser.InnumerablePropertyPrefix = /^_/;\n                dataview.DataViewObjectsParser = DataViewObjectsParser;\n            })(dataview = utils.dataview || (utils.dataview = {}));\n        })(utils = extensibility.utils || (extensibility.utils = {}));\n    })(extensibility = powerbi.extensibility || (powerbi.extensibility = {}));\n})(powerbi || (powerbi = {}));\n\nvar powerbi;\r\n(function (powerbi) {\r\n    var extensibility;\r\n    (function (extensibility) {\r\n        var visual;\r\n        (function (visual) {\r\n            var SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798;\r\n            (function (SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798) {\r\n                \"use strict\";\r\n                var injectorCounter = 0;\r\n                function ResetInjector() {\r\n                    injectorCounter = 0;\r\n                }\r\n                SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798.ResetInjector = ResetInjector;\r\n                function injectorReady() {\r\n                    return injectorCounter === 0;\r\n                }\r\n                SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798.injectorReady = injectorReady;\r\n                function ParseElement(el, target) {\r\n                    var arr = [];\r\n                    if (!el || !el.hasChildNodes()) {\r\n                        return;\r\n                    }\r\n                    var nodes = el.children;\r\n                    for (var i = 0; i < nodes.length; i++) {\r\n                        var tempNode = void 0;\r\n                        if (nodes.item(i).nodeName.toLowerCase() === \"script\") {\r\n                            tempNode = createScriptNode(nodes.item(i));\r\n                        }\r\n                        else {\r\n                            tempNode = nodes.item(i).cloneNode(true);\r\n                        }\r\n                        target.appendChild(tempNode);\r\n                        arr.push(tempNode);\r\n                    }\r\n                    return arr;\r\n                }\r\n                SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798.ParseElement = ParseElement;\r\n                function createScriptNode(refNode) {\r\n                    var script = document.createElement(\"script\");\r\n                    var attr = refNode.attributes;\r\n                    for (var i = 0; i < attr.length; i++) {\r\n                        script.setAttribute(attr[i].name, attr[i].textContent);\r\n                        if (attr[i].name.toLowerCase() === \"src\") {\r\n                            // waiting only for src to finish loading - async opetation\r\n                            injectorCounter++;\r\n                            script.onload = function () {\r\n                                injectorCounter--;\r\n                            };\r\n                        }\r\n                    }\r\n                    script.innerHTML = refNode.innerHTML;\r\n                    return script;\r\n                }\r\n                function RunHTMLWidgetRenderer() {\r\n                    // rendering HTML which was created by HTMLWidgets package\r\n                    // wait till all the script elements are loaded\r\n                    var intervalVar = window.setInterval(function () {\r\n                        if (injectorReady()) {\r\n                            window.clearInterval(intervalVar);\r\n                            if (window.hasOwnProperty(\"HTMLWidgets\") && window[\"HTMLWidgets\"].staticRender) {\r\n                                window[\"HTMLWidgets\"].staticRender();\r\n                            }\r\n                        }\r\n                    }, 100);\r\n                }\r\n                SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798.RunHTMLWidgetRenderer = RunHTMLWidgetRenderer;\r\n            })(SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798 = visual.SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798 || (visual.SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798 = {}));\r\n        })(visual = extensibility.visual || (extensibility.visual = {}));\r\n    })(extensibility = powerbi.extensibility || (powerbi.extensibility = {}));\r\n})(powerbi || (powerbi = {}));\r\n/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved.\r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *\r\n *  The above copyright notice and this permission notice shall be included in\r\n *  all copies or substantial portions of the Software.\r\n *\r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\nvar powerbi;\r\n(function (powerbi) {\r\n    var extensibility;\r\n    (function (extensibility) {\r\n        var visual;\r\n        (function (visual) {\r\n            var SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798;\r\n            (function (SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798) {\r\n                'use strict';\r\n                var DataViewObjects;\r\n                (function (DataViewObjects) {\r\n                    /** Gets the value of the given object/property pair. */\r\n                    function getValue(objects, propertyId, defaultValue) {\r\n                        if (!objects) {\r\n                            return defaultValue;\r\n                        }\r\n                        var objectOrMap;\r\n                        objectOrMap = objects[propertyId.objectName];\r\n                        var object;\r\n                        object = objectOrMap;\r\n                        return getIndividualDataViewObject.getValue(object, propertyId.propertyName, defaultValue);\r\n                    }\r\n                    DataViewObjects.getValue = getValue;\r\n                    /** Gets an object from objects. */\r\n                    function getObject(objects, propertyName, defaultValue) {\r\n                        if (objects && objects[propertyName]) {\r\n                            var object = void 0;\r\n                            object = objects[propertyName];\r\n                            return object;\r\n                        }\r\n                        else {\r\n                            return defaultValue;\r\n                        }\r\n                    }\r\n                    DataViewObjects.getObject = getObject;\r\n                    /** Gets a map of user-defined objects. */\r\n                    function getUserDefinedObjects(objects, propertyName) {\r\n                        if (objects && objects[propertyName]) {\r\n                            var objectMap = void 0;\r\n                            objectMap = objects[propertyName];\r\n                            return objectMap;\r\n                        }\r\n                    }\r\n                    DataViewObjects.getUserDefinedObjects = getUserDefinedObjects;\r\n                    /** Gets the solid color from a fill property. */\r\n                    function getFillColor(objects, propertyId, defaultColor) {\r\n                        var value;\r\n                        value = getValue(objects, propertyId);\r\n                        if (!value || !value.solid) {\r\n                            return defaultColor;\r\n                        }\r\n                        return value.solid.color;\r\n                    }\r\n                    DataViewObjects.getFillColor = getFillColor;\r\n                })(DataViewObjects = SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798.DataViewObjects || (SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798.DataViewObjects = {}));\r\n                var getIndividualDataViewObject;\r\n                (function (getIndividualDataViewObject) {\r\n                    function getValue(object, propertyName, defaultValue) {\r\n                        if (!object) {\r\n                            return defaultValue;\r\n                        }\r\n                        var propertyValue;\r\n                        propertyValue = object[propertyName];\r\n                        if (propertyValue === undefined) {\r\n                            return defaultValue;\r\n                        }\r\n                        return propertyValue;\r\n                    }\r\n                    getIndividualDataViewObject.getValue = getValue;\r\n                    /** Gets the solid color from a fill property using only a propertyName */\r\n                    function getFillColorByPropertyName(objects, propertyName, defaultColor) {\r\n                        var value;\r\n                        value = getIndividualDataViewObject.getValue(objects, propertyName);\r\n                        if (!value || !value.solid) {\r\n                            return defaultColor;\r\n                        }\r\n                        return value.solid.color;\r\n                    }\r\n                    getIndividualDataViewObject.getFillColorByPropertyName = getFillColorByPropertyName;\r\n                })(getIndividualDataViewObject = SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798.getIndividualDataViewObject || (SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798.getIndividualDataViewObject = {}));\r\n                SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798.chartProp = {\r\n                    SlopeColor: {\r\n                        upColor: { objectName: 'SlopeColor', propertyName: 'upColor' },\r\n                        downColor: { objectName: 'SlopeColor', propertyName: 'downColor' },\r\n                        neutralColor: { objectName: 'SlopeColor', propertyName: 'neutralColor' }\r\n                    },\r\n                    YAxis: {\r\n                        yTitle: { objectName: 'yAxis', propertyName: 'yTitle' },\r\n                        yGrid: { objectName: 'yAxis', propertyName: 'yGrid' },\r\n                        yGridCol: { objectName: 'yAxis', propertyName: 'yGridCol' }\r\n                    },\r\n                    Intercept: {\r\n                        intercept1Title: { objectName: 'intercept', propertyName: 'intercept1Title' },\r\n                        intercept2Title: { objectName: 'intercept', propertyName: 'intercept2Title' },\r\n                        intercept1Color: { objectName: 'intercept', propertyName: 'intercept1Color' },\r\n                        intercept2Color: { objectName: 'intercept', propertyName: 'intercept2Color' }\r\n                    }\r\n                };\r\n            })(SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798 = visual.SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798 || (visual.SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798 = {}));\r\n        })(visual = extensibility.visual || (extensibility.visual = {}));\r\n    })(extensibility = powerbi.extensibility || (powerbi.extensibility = {}));\r\n})(powerbi || (powerbi = {}));\r\n/*\r\n *  Power BI Visual CLI\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved.\r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *\r\n *  The above copyright notice and this permission notice shall be included in\r\n *  all copies or substantial portions of the Software.\r\n *\r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\nvar powerbi;\r\n(function (powerbi) {\r\n    var extensibility;\r\n    (function (extensibility) {\r\n        var visual;\r\n        (function (visual) {\r\n            var SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798;\r\n            (function (SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798) {\r\n                'use strict';\r\n                // in order to improve the performance, one can update the <head> only in the initial rendering.\r\n                // set to 'true' if you are using different packages to create the widgets\r\n                var updateHTMLHead = false;\r\n                var renderVisualUpdateType = [\r\n                    powerbi.VisualUpdateType.Resize,\r\n                    powerbi.VisualUpdateType.ResizeEnd,\r\n                    powerbi.VisualUpdateType.Resize + powerbi.VisualUpdateType.ResizeEnd\r\n                ];\r\n                var SlopeChart = (function () {\r\n                    function SlopeChart(options) {\r\n                        if (options && options.element) {\r\n                            this.rootElement = options.element;\r\n                        }\r\n                        this.headNodes = [];\r\n                        this.bodyNodes = [];\r\n                    }\r\n                    SlopeChart.prototype.update = function (options) {\r\n                        if (!options ||\r\n                            !options.type ||\r\n                            !options.viewport ||\r\n                            !options.dataViews ||\r\n                            options.dataViews.length === 0 ||\r\n                            !options.dataViews[0]) {\r\n                            return;\r\n                        }\r\n                        var dataView = options.dataViews[0];\r\n                        this.slopeColorSettings = this.getSlopeColors(dataView);\r\n                        this.yAxisSettings = this.getyAxis(dataView);\r\n                        this.interceptSettings = this.getintercept(dataView);\r\n                        var payloadBase64 = null;\r\n                        if (dataView.scriptResult && dataView.scriptResult.payloadBase64) {\r\n                            payloadBase64 = dataView.scriptResult.payloadBase64;\r\n                        }\r\n                        if (renderVisualUpdateType.indexOf(options.type) === -1) {\r\n                            if (payloadBase64) {\r\n                                this.injectCodeFromPayload(payloadBase64);\r\n                            }\r\n                        }\r\n                        else {\r\n                            this.onResizing(options.viewport);\r\n                        }\r\n                    };\r\n                    SlopeChart.prototype.getDefaultSlopeColors = function () {\r\n                        return {\r\n                            upColor: '#00ba38',\r\n                            downColor: '#f8766d',\r\n                            neutralColor: '#F2C80F'\r\n                        };\r\n                    };\r\n                    SlopeChart.prototype.getDefaultyAxis = function () {\r\n                        return {\r\n                            yTitle: '',\r\n                            yGrid: false,\r\n                            yGridCol: 'Grey50'\r\n                        };\r\n                    };\r\n                    SlopeChart.prototype.getDefaultintercept = function () {\r\n                        return {\r\n                            intercept1Color: 'black',\r\n                            intercept1Title: '',\r\n                            intercept2Title: '',\r\n                            intercept2Color: 'black'\r\n                        };\r\n                    };\r\n                    SlopeChart.prototype.getSlopeColors = function (dataView) {\r\n                        var slopeColorSettings = this.getDefaultSlopeColors();\r\n                        var objects = null;\r\n                        if (!dataView.metadata || !dataView.metadata.objects) {\r\n                            return slopeColorSettings;\r\n                        }\r\n                        objects = dataView.metadata.objects;\r\n                        slopeColorSettings.upColor = SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798.DataViewObjects.getFillColor(objects, SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798.chartProp.SlopeColor.upColor, slopeColorSettings.upColor);\r\n                        slopeColorSettings.downColor =\r\n                            SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798.DataViewObjects.getFillColor(objects, SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798.chartProp.SlopeColor.downColor, slopeColorSettings.downColor);\r\n                        slopeColorSettings.neutralColor =\r\n                            SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798.DataViewObjects.getFillColor(objects, SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798.chartProp.SlopeColor.neutralColor, slopeColorSettings.neutralColor);\r\n                        return slopeColorSettings;\r\n                    };\r\n                    SlopeChart.prototype.getyAxis = function (dataView) {\r\n                        var yAxisSettings = this.getDefaultyAxis();\r\n                        var objects = null;\r\n                        if (!dataView.metadata || !dataView.metadata.objects) {\r\n                            return yAxisSettings;\r\n                        }\r\n                        objects = dataView.metadata.objects;\r\n                        yAxisSettings.yTitle = SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798.DataViewObjects.getValue(objects, SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798.chartProp.YAxis.yTitle, yAxisSettings.yTitle);\r\n                        yAxisSettings.yGrid = SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798.DataViewObjects.getValue(objects, SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798.chartProp.YAxis.yGrid, yAxisSettings.yGrid);\r\n                        yAxisSettings.yGridCol = SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798.DataViewObjects.getValue(objects, SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798.chartProp.YAxis.yGridCol, yAxisSettings.yGridCol);\r\n                        return yAxisSettings;\r\n                    };\r\n                    SlopeChart.prototype.getintercept = function (dataView) {\r\n                        var interceptSettings = this.getDefaultintercept();\r\n                        var objects = null;\r\n                        if (!dataView.metadata || !dataView.metadata.objects) {\r\n                            return interceptSettings;\r\n                        }\r\n                        objects = dataView.metadata.objects;\r\n                        interceptSettings.intercept1Color =\r\n                            SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798.DataViewObjects.getFillColor(objects, SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798.chartProp.Intercept.intercept1Color, interceptSettings.intercept1Color);\r\n                        interceptSettings.intercept2Color =\r\n                            SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798.DataViewObjects.getFillColor(objects, SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798.chartProp.Intercept.intercept2Color, interceptSettings.intercept2Color);\r\n                        interceptSettings.intercept1Title =\r\n                            SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798.DataViewObjects.getValue(objects, SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798.chartProp.Intercept.intercept1Title, interceptSettings.intercept1Title);\r\n                        interceptSettings.intercept2Title =\r\n                            SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798.DataViewObjects.getValue(objects, SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798.chartProp.Intercept.intercept2Title, interceptSettings.intercept2Title);\r\n                        return interceptSettings;\r\n                    };\r\n                    SlopeChart.prototype.onResizing = function (finalViewport) {\r\n                        /* add code to handle resizing of the view port */\r\n                    };\r\n                    SlopeChart.prototype.injectCodeFromPayload = function (payloadBase64) {\r\n                        // inject HTML from payload, created in R\r\n                        // the code is injected to the 'head' and 'body' sections.\r\n                        // if the visual was already rendered, the previous DOM elements are cleared\r\n                        SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798.ResetInjector();\r\n                        if (!payloadBase64) {\r\n                            return;\r\n                        }\r\n                        // create 'virtual' HTML, so parsing is easier\r\n                        var el = document.createElement('html');\r\n                        try {\r\n                            el.innerHTML = window.atob(payloadBase64);\r\n                        }\r\n                        catch (err) {\r\n                            return;\r\n                        }\r\n                        // if 'updateHTMLHead == false', then the code updates the header data only on the 1st rendering\r\n                        // this option allows loading and parsing of large and recurring scripts only once.\r\n                        if (updateHTMLHead || this.headNodes.length === 0) {\r\n                            while (this.headNodes.length > 0) {\r\n                                var tempNode = this.headNodes.pop();\r\n                                document.head.removeChild(tempNode);\r\n                            }\r\n                            var headList = el.getElementsByTagName('head');\r\n                            if (headList && headList.length > 0) {\r\n                                var head = headList[0];\r\n                                this.headNodes = SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798.ParseElement(head, document.head);\r\n                            }\r\n                        }\r\n                        // update 'body' nodes, under the rootElement\r\n                        while (this.bodyNodes.length > 0) {\r\n                            var tempNode = this.bodyNodes.pop();\r\n                            this.rootElement.removeChild(tempNode);\r\n                        }\r\n                        var bodyList = el.getElementsByTagName('body');\r\n                        if (bodyList && bodyList.length > 0) {\r\n                            var body = bodyList[0];\r\n                            this.bodyNodes = SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798.ParseElement(body, this.rootElement);\r\n                        }\r\n                        SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798.RunHTMLWidgetRenderer();\r\n                    };\r\n                    /**\r\n                     * This function gets called for each of the objects defined in the capabilities files and allows you to select which of the\r\n                     * objects and properties you want to expose to the users in the property pane.\r\n                     *\r\n                     */\r\n                    SlopeChart.prototype.enumerateObjectInstances = function (options) {\r\n                        var objectName;\r\n                        objectName = options.objectName;\r\n                        var objectEnum;\r\n                        objectEnum = [];\r\n                        var props;\r\n                        switch (objectName) {\r\n                            case 'SlopeColor':\r\n                                objectEnum.push({\r\n                                    objectName: objectName,\r\n                                    properties: {\r\n                                        upColor: this.slopeColorSettings.upColor,\r\n                                        downColor: this.slopeColorSettings.downColor,\r\n                                        neutralColor: this.slopeColorSettings.neutralColor\r\n                                    },\r\n                                    selector: null\r\n                                });\r\n                                break;\r\n                            case 'yAxis':\r\n                                props = {};\r\n                                props[\"yTitle\"] = this.yAxisSettings.yTitle;\r\n                                props[\"yGrid\"] = this.yAxisSettings.yGrid;\r\n                                if (this.yAxisSettings.yGrid) {\r\n                                    props[\"yGridCol\"] = this.yAxisSettings.yGridCol;\r\n                                }\r\n                                objectEnum.push({\r\n                                    objectName: objectName,\r\n                                    properties: props,\r\n                                    selector: null\r\n                                });\r\n                                break;\r\n                            case 'intercept':\r\n                                objectEnum.push({\r\n                                    objectName: objectName,\r\n                                    properties: {\r\n                                        intercept1Color: this.interceptSettings.intercept1Color,\r\n                                        intercept2Color: this.interceptSettings.intercept2Color,\r\n                                        intercept1Title: this.interceptSettings.intercept1Title,\r\n                                        intercept2Title: this.interceptSettings.intercept2Title\r\n                                    },\r\n                                    selector: null\r\n                                });\r\n                                break;\r\n                            default:\r\n                                break;\r\n                        }\r\n                        return objectEnum;\r\n                    };\r\n                    return SlopeChart;\r\n                }());\r\n                SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798.SlopeChart = SlopeChart;\r\n            })(SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798 = visual.SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798 || (visual.SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798 = {}));\r\n        })(visual = extensibility.visual || (extensibility.visual = {}));\r\n    })(extensibility = powerbi.extensibility || (powerbi.extensibility = {}));\r\n})(powerbi || (powerbi = {}));\r\nvar powerbi;\r\n(function (powerbi) {\r\n    var visuals;\r\n    (function (visuals) {\r\n        var plugins;\r\n        (function (plugins) {\r\n            plugins.SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798_DEBUG = {\r\n                name: 'SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798_DEBUG',\r\n                displayName: 'Slope chart by MAQ Software',\r\n                class: 'SlopeChart',\r\n                version: '3.0.1',\r\n                apiVersion: '1.8.0',\r\n                create: function (options) { return new powerbi.extensibility.visual.SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798.SlopeChart(options); },\r\n                custom: true\r\n            };\r\n        })(plugins = visuals.plugins || (visuals.plugins = {}));\r\n    })(visuals = powerbi.visuals || (powerbi.visuals = {}));\r\n})(powerbi || (powerbi = {}));\r\n//# sourceMappingURL=visual.js.map","css":".visual-SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798_DEBUG .rcv_autoScaleImageContainer {\n  position: relative;\n}\n.visual-SlopeChartRHTMLA849C818E46E4556B53BF9C8E9E82798_DEBUG .rcv_autoScaleImageContainer .rcv_autoScaleImage {\n  max-width: 100%;\n  max-height: 100%;\n  position: absolute;\n  top: 50%;\n  \n  left: 50%;\n  transform: translateY(-50%) translateX(-50%);\n  -webkit-transform: translateY(-50%) translateX(-50%);\n}\n","iconBase64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFEmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxNy0xMi0wNlQxNjowMDo0NCswNTozMCIgeG1wOk1vZGlmeURhdGU9IjIwMTctMTItMDZUMTY6MDc6NDgrMDU6MzAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTctMTItMDZUMTY6MDc6NDgrMDU6MzAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MmM5MjllMGUtNWFmZC0zZjRmLWI4NTYtNTFjMjNmNWE2MmU2IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjJjOTI5ZTBlLTVhZmQtM2Y0Zi1iODU2LTUxYzIzZjVhNjJlNiIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjJjOTI5ZTBlLTVhZmQtM2Y0Zi1iODU2LTUxYzIzZjVhNjJlNiI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MmM5MjllMGUtNWFmZC0zZjRmLWI4NTYtNTFjMjNmNWE2MmU2IiBzdEV2dDp3aGVuPSIyMDE3LTEyLTA2VDE2OjAwOjQ0KzA1OjMwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PpJknUkAAAIJSURBVDiNrZXPaxNBGIaf3TZNNJVgKflBi4kYCBY0OQiKIt1D6dWAJ0Vo/oSePPRivAQPHmIpCIKQm16qEW+5uF7Eg6JWQYIpupedXavQiJS0TTMespsmzaqk5IWB2W/me9h5v28YRUrJMKUCCMvWhGUnDgMQlp0Rlp3pAQIvgNxhgE1aK0DxIJBA/blGRcl45HgqWV3SktWl0qemuNSQzYAbH+1MGtVZ4B0VxQB0oMy8LHuAssAiMOvGzFY9cZKpXiBqoA6EgDiwACxQUQCebYwEK9cjN/jqm7jprLsyouqx5qQ6brkBRUqJsGwJ3I6tRcu0vdSA9MG/+zwW5knwLB/9sbdv/NMrtVShJCxbB4hFI1o/MBrJO8dKnN75fvdCw7h6fttgbuuLl40GULZn1uZao+EfnsDL9Xu648+V7szw3u9H9zdW9fS2eRHIOtYA8PPUU/Z80+vhE+eSPR6u7nzIAbe6OHXa7VB8NbO8CcsADwCcbsg58HhrJLTpJnWAv2TDNdsA8kC5lip0NvZoXr53TrK4a357LdUjjT7gceVoFbhTSxVKnpC/qBsGXY2dHTvzeFCYl9T/bxlMPUUpVnVtUMDD8WvpKTW03gd0ihL3zPqHtuQuTVr7V9idJNSJl7Tv8ECaVIM5P779wkgpMYUlTWHlpZQMOkxh6aawdPd76EVRhv0E/AGumPXE+Hnz3wAAAABJRU5ErkJggg=="}}